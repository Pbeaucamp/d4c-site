<div class="d4c-embed-control">
<!--
MIT Licence
ods-widgets -- https://github.com/opendatasoft/ods-widgets
Copyright (c) 2014 - Opendatasoft
-->
    <div class="d4c-embed-control__icons">
        <button class="btn btn-primary" disabled>
            <span class="glyphicon glyphicon-shopping-cart" aria-hidden="true"></span>
            <span class="badges">+1</span>
        </button>
    </div>   

    <d4c-tabs sync-to-url="false" layout="simple-nav" collapsible="defaultCollapse == 'true'" default-collapsed="defaultCollapse == 'true'" default-tab="{{ defaultTab }}">

        <d4c-pane title="Transform into dataset" translate="title" ng-show="loggedIn && !visualizationId">
            <div class="row">
                <label for="metadata-name">Nom de la connaissance : </label>
                <br/>
                <input style="width:90% !important;" id="metadata-name" ng-model="visualizationName" type="text">
            </div>
            <br/>
            <div class="row">
                <label for="metadata-licence">Licence : </label>
                <select style="width:90%;" id="metadata-licence" ng-model="visualizationLicense" ng-options="license.title as license.title for license in licenseOptions">
                </select>
            </div>
            <br/>
            <div class="row">
                <label for="metadata-visibility">Visibilité : </label>
                <select style="width:90%;" id="metadata-visibility" ng-model="visualizationIsPrivate" ng-options="visibility.value as visibility.label for visibility in visibilityOptions">
                </select>
            </div>
            <br/>
            <button class="btn"
                ng-disabled="!visualizationName || !visualizationLicense || visualizationIsPrivate==null"
                ng-click="saveEmbed(visualizationName,visualizationLicense,visualizationIsPrivate, share_url, '&lt;iframe src=&quot;' + embed_url + '&quot; width=&quot;' + size.width + '&quot; height=&quot;' + size.height + '&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;', widgetCode)"
                type="button">
                <span translate>Créer une connaissance</span>
            </button>
        </d4c-pane>

        <d4c-pane title="Update the dataset" translate="title" ng-show="loggedIn && visualizationId">
            <span translate>La visualisation est en cours d'édition</span>
            <button class="d4c-button d4c-modal__action"
                    ng-click="updateEmbed(visualizationId, share_url, '&lt;iframe src=&quot;' + embed_url + '&quot; width=&quot;' + size.width + '&quot; height=&quot;' + size.height + '&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;', widgetCode)"
                    type="button">
                <span translate>Mettre à jour la visualisation</span>
            </button>
        </d4c-pane>

        <d4c-pane title="Share" translate="title">
            <d4c-clipboard-input value="share_url" input-width="fluid" type="url"></d4c-clipboard-input>
        </d4c-pane>


        <d4c-pane title="Embed" icon="{{ anonymousAccess ? '': 'warning' }}" translate="title">
            <div ng-if="!anonymousAccess" class="d4c-message-box d4c-message-box--warning" translate>
                This embed will not be visible to everyone because the domain is not open to anonymous users on the web.
            </div>

            <d4c-clipboard-input value="'&lt;iframe src=&quot;' + embed_url + '&quot; width=&quot;' + size.width + '&quot; height=&quot;' + size.height + '&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;'"
                                 input-width="fluid"
                                 type="url">
            </d4c-clipboard-input>

            <div class="d4c-embed-control__size-options d4c-form__horizontal-controls">
                <select class="d4c-form__control"
                        ng-model="size"
                        ng-options="s as s.label for s in sizes">
                </select>
                <span ng-show="size.name === 'custom'"
                      class="d4c-form__horizontal-controls"
                      dir="ltr">
                    <input type="number"
                           min="0"
                           step="1"
                           ng-model="size.width"
                           class="d4c-form__control"/>
                    &nbsp;
                    &times;
                    <input type="number"
                           min="0"
                           step="1"
                           ng-model="size.height"
                           class="d4c-form__control"/>
                </span>
            </div>

            <div class="d4c-embed-control__misc-options">
                <label ng-if="!forceEmbedDatasetCard" class="d4c-embed-control__misc-option">
                    <input type="checkbox" ng-model="embedUrlOptions.datasetcard"/>
                    <small>
                        <span translate>
                        Display dataset information card
                    </span>
                    </small>
                </label>

                <label ng-show="embedType === 'map'" class="d4c-embed-control__misc-option">
                    <input type="checkbox" ng-model="embedUrlOptions.static"/>
                    <small>
                        <span translate>
                            Lock map's zoom and position
                        </span>
                    </small>
                </label>

                <label ng-show="embedType === 'map'" class="d4c-embed-control__misc-option">
                    <input type="checkbox" ng-model="mapOptions.scrollWheelZoom">
                    <small translate>
                        Enable zooming in and out with the mouse wheel
                    </small>
                </label>
            </div>
        </d4c-pane>


        <d4c-pane title="Widget" ng-show="widgetCode" translate="title">
            <d4c-clipboard-textarea value="widgetCode" input-width="fluid" type="code"></d4c-clipboard-textarea>
        </d4c-pane>


    </d4c-tabs>
</div>
