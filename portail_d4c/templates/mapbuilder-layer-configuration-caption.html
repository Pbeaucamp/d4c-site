<!--
MIT Licence
ods-widgets -- https://github.com/opendatasoft/ods-widgets
Copyright (c) 2014 - Opendatasoft
-->
<div class="d4c-mapbuilder__layer-configuration d4c-mapbuilder__layer-configuration-caption">

    <div class="d4c-form">
        <div class="d4c-mapbuilder__layer-configuration__message-box d4c-message-box d4c-message-box--warning"
         ng-show="group.layers.length > 1">
            <p translate>This dataset is part of a group, therefore only the group's title and description will appear in the map's visibility control.</p>
        </div>
        <div class="d4c-mapbuilder__layer-configuration__section">
            <h2 class="d4c-mapbuilder__layer-configuration__section-title" translate>Information</h2>
            <div class="d4c-form__group d4c-form__group--horizontal">
                <label class="d4c-form__label d4c-form__label--mapbuilder-layer-configuration"
                       for="layerTitle"translate>Title</label>
                <input class="d4c-form__control d4c-form__control--fluid"
                       id="layerTitle"
                       type="text"
                       ng-model="layer.title"
                       ng-model-options="{updateOn: 'change blur'}"
                       ng-value="layer.title || layer.context.dataset.metas.title">
            </div>
            <div class="d4c-form__group d4c-form__group--horizontal" ng-init="maxLength = 200">
                <label class="d4c-form__label d4c-form__label--mapbuilder-layer-configuration"
                       for="layerDescription"
                       translate>Description</label>
                <div class="d4c-form__group--vertical  d4c-mapbuilder__layer-configuration__description">
                    <textarea class="d4c-form__control d4c-mapbuilder__layer-configuration__description-input"
                              maxlength="{{ maxLength }}"
                              ng-model="layer.description"
                              id=layerDescription"></textarea>
                    <p class="d4c-form__help-text d4c-mapbuilder__layer-configuration__description-help"
                       translate-n="maxLength - layer.description.length"
                       translate-plural="{{ $count }} characters remaining"
                       translate>{{ $count }} character remaining</p>
                </div>
            </div>
            <fieldset>
                <div class="d4c-form__group d4c-form__group--horizontal">
                    <legend class="d4c-form__label d4c-form__label--mapbuilder-layer-configuration"
                           translate>Icon</legend>
                    <d4c-pictopicker ng-model="layer.captionPictoIcon"></d4c-pictopicker>
                </div>
            </fieldset>
            <fieldset>
                <div class="d4c-form__group d4c-form__group--horizontal">
                    <legend class="d4c-form__label d4c-form__label--mapbuilder-layer-configuration"
                           translate>Color</legend>
                    <d4c-colorpicker ng-model="layer.captionPictoColor"
                                     required="true"
                                     default-color="#E5E5E5"
                                     aria-label-text="Layer color"
                                     translate="aria-label-text"></d4c-colorpicker>
                </div>
            </fieldset>
        </div>
        <div class="d4c-mapbuilder__layer-configuration__section">
            <h2 class="d4c-mapbuilder__layer-configuration__section-title" translate>Caption</h2>
            <fieldset>
                <div class="d4c-form__group d4c-form__group--horizontal">
                    <legend class="d4c-form__label d4c-form__label--mapbuilder-layer-configuration"
                           translate>Display</legend>
                    <div class="d4c-form__check-line">
                        <label class="d4c-form__check-label">
                            <input type="checkbox"
                                   class="d4c-form__control-check"
                                   ng-model="layer.caption">
                            <span translate>Display caption for this dataset</span>
                        </label>
                    </div>
                </div>
            </fieldset>

            <div class="d4c-form__group d4c-form__group--horizontal">
                <label class="d4c-form__label d4c-form__label--mapbuilder-layer-configuration" for="captionTitle"
                       translate>Title</label>
                <input type="text"
                       id="captionTitle"
                       class="d4c-form__control d4c-form__control--fluid"
                       ng-model="layer.captionTitle"
                       ng-value="layer.captionTitle || layer.title || layer.context.dataset.metas.title "
                       ng-disabled="!layer.caption">
            </div>
        </div>
    </div>
</div>